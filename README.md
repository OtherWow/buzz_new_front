# å¤šè§’è‰²äº¤æ˜“ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + TypeScript + Element Plus å¼€å‘çš„å¤šè§’è‰²äº¤æ˜“ç®¡ç†ç³»ç»Ÿå‰ç«¯é¡¹ç›®ã€‚ç³»ç»Ÿæ”¯æŒä¸åŒè§’è‰²ç”¨æˆ·ç™»å½•åæŸ¥çœ‹ä¸åŒçš„é¡µé¢å’ŒåŠŸèƒ½ï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æƒé™é…ç½®ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 (Composition API)
- **è¯­è¨€**: TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **UIç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ ·å¼**: SCSS
- **å›¾æ ‡**: Element Plus Icons
- **ä»£ç è§„èŒƒ**: ESLint + Stylelint

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” è®¤è¯ä¸æˆæƒ
- JWT Token è®¤è¯
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ (RBAC)
- è·¯ç”±çº§æƒé™ä¿æŠ¤
- ç»„ä»¶çº§æƒé™æ§åˆ¶
- æƒé™æŒ‡ä»¤æ”¯æŒ

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- å¤šè§’è‰²ç”¨æˆ·ç³»ç»Ÿ
- ç”¨æˆ·åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- ç”¨æˆ·çŠ¶æ€ç®¡ç†
- è§’è‰²åˆ†é…

### ğŸ”‘ æƒé™ç®¡ç†
- åŠ¨æ€æƒé™é…ç½®
- è§’è‰²æƒé™ç®¡ç†
- èœå•æƒé™æ§åˆ¶
- æŒ‰é’®çº§æƒé™æ§åˆ¶

### ğŸ’° äº¤æ˜“ç®¡ç†
- äº¤æ˜“è®°å½•ç®¡ç†
- äº¤æ˜“çŠ¶æ€è·Ÿè¸ª
- äº¤æ˜“ç»Ÿè®¡åˆ†æ
- äº¤æ˜“ç±»å‹åˆ†ç±»

### ğŸ“Š ä»ªè¡¨ç›˜
- æ•°æ®ç»Ÿè®¡å±•ç¤º
- æƒé™ç›¸å…³çš„åŠŸèƒ½å±•ç¤º
- å¿«æ·æ“ä½œå…¥å£
- æœ€è¿‘äº¤æ˜“è®°å½•

## æƒé™ç³»ç»Ÿè®¾è®¡

### æƒé™ä»£ç è§„èŒƒ
æƒé™ä»£ç é‡‡ç”¨ `èµ„æº:æ“ä½œ` çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼š
- `user:read` - è¯»å–ç”¨æˆ·ä¿¡æ¯
- `user:create` - åˆ›å»ºç”¨æˆ·
- `transaction:update` - æ›´æ–°äº¤æ˜“
- `system:manage` - ç³»ç»Ÿç®¡ç†

### é¢„è®¾è§’è‰²
- **ç³»ç»Ÿç®¡ç†å‘˜** - æ‹¥æœ‰æ‰€æœ‰æƒé™
- **æ“ä½œå‘˜** - æ‹¥æœ‰äº¤æ˜“ç®¡ç†å’Œéƒ¨åˆ†ç”¨æˆ·æŸ¥çœ‹æƒé™
- **æ™®é€šç”¨æˆ·** - åªèƒ½æŸ¥çœ‹è‡ªå·±çš„äº¤æ˜“è®°å½•

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/                    # APIæ¥å£
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯ç›¸å…³API
â”‚   â””â”€â”€ request.ts         # axioså°è£…
â”œâ”€â”€ components/            # å…¬å…±ç»„ä»¶
â”œâ”€â”€ directives/           # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â””â”€â”€ permission.ts     # æƒé™æŒ‡ä»¤
â”œâ”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ components/       # å¸ƒå±€å­ç»„ä»¶
â”‚   â””â”€â”€ index.vue        # ä¸»å¸ƒå±€
â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.ts         # è·¯ç”±å®šä¹‰
â”œâ”€â”€ stores/               # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ auth.ts          # è®¤è¯çŠ¶æ€
â”œâ”€â”€ styles/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ index.scss       # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ variables.scss   # SCSSå˜é‡
â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts         # TypeScriptç±»å‹
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ permission.ts    # æƒé™å·¥å…·
â”œâ”€â”€ views/                # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard.vue    # ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ Login.vue        # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ error/           # é”™è¯¯é¡µé¢
â”‚   â”œâ”€â”€ transactions/    # äº¤æ˜“ç®¡ç†
â”‚   â”œâ”€â”€ users/           # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ roles/           # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ permissions/     # æƒé™ç®¡ç†
â”‚   â””â”€â”€ settings/        # ç³»ç»Ÿè®¾ç½®
â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â””â”€â”€ main.ts              # å…¥å£æ–‡ä»¶
```

## å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16
- npm >= 7 æˆ– yarn >= 1.22

### å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–
yarn install
```

### å¼€å‘ç¯å¢ƒè¿è¡Œ
```bash
npm run dev
# æˆ–
yarn dev
```

é¡¹ç›®å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### ç”Ÿäº§ç¯å¢ƒæ„å»º
```bash
npm run build
# æˆ–
yarn build
```

### ä»£ç æ£€æŸ¥
```bash
# ESLintæ£€æŸ¥
npm run lint

# æ ·å¼æ£€æŸ¥
npm run lint:style
```

## æµ‹è¯•è´¦å·

### ç®¡ç†å‘˜è´¦å·
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`
- æƒé™: æ‰€æœ‰åŠŸèƒ½æƒé™

### æ“ä½œå‘˜è´¦å·
- ç”¨æˆ·å: `operator`
- å¯†ç : `operator123`
- æƒé™: äº¤æ˜“ç®¡ç†ã€ç”¨æˆ·æŸ¥çœ‹

### æ™®é€šç”¨æˆ·è´¦å·
- ç”¨æˆ·å: `user`
- å¯†ç : `user123`
- æƒé™: ä»…æŸ¥çœ‹ä¸ªäººäº¤æ˜“

## æƒé™ä½¿ç”¨ç¤ºä¾‹

### åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æƒé™æŒ‡ä»¤
```vue
<template>
  <!-- æ£€æŸ¥å•ä¸ªæƒé™ -->
  <el-button v-permission="'user:create'">åˆ›å»ºç”¨æˆ·</el-button>
  
  <!-- æ£€æŸ¥å¤šä¸ªæƒé™ï¼ˆéœ€è¦å…¨éƒ¨æ‹¥æœ‰ï¼‰ -->
  <el-button v-permission="['user:read', 'user:update']">ç¼–è¾‘ç”¨æˆ·</el-button>
  
  <!-- æ£€æŸ¥è§’è‰² -->
  <div v-role="'admin'">ç®¡ç†å‘˜ä¸“ç”¨åŠŸèƒ½</div>
  
  <!-- æ£€æŸ¥ä»»æ„æƒé™ï¼ˆæ‹¥æœ‰å…¶ä¸­ä¸€ä¸ªå³å¯ï¼‰ -->
  <div v-permission-any="['user:read', 'role:read']">ç”¨æˆ·æˆ–è§’è‰²ç®¡ç†</div>
</template>
```

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æƒé™å‡½æ•°
```vue
<script setup lang="ts">
import { useAuthStore } from '@/stores/auth'

const authStore = useAuthStore()

// æ£€æŸ¥æƒé™
const canCreateUser = authStore.hasPermission('user:create')
const isAdmin = authStore.hasRole('admin')

// æ ¹æ®æƒé™æ˜¾ç¤ºä¸åŒå†…å®¹
const menuItems = computed(() => {
  const items = []
  if (authStore.hasPermission('user:read')) {
    items.push({ name: 'ç”¨æˆ·ç®¡ç†', path: '/users' })
  }
  if (authStore.hasPermission('transaction:read')) {
    items.push({ name: 'äº¤æ˜“ç®¡ç†', path: '/transactions' })
  }
  return items
})
</script>
```

## APIæ¥å£è¯´æ˜

åç«¯APIæ¥å£è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ [APIæ¥å£æ–‡æ¡£.md](./APIæ¥å£æ–‡æ¡£.md)

### åŸºç¡€é…ç½®
- æ¥å£åŸºç¡€åœ°å€: `http://localhost:8000`
- è®¤è¯æ–¹å¼: Bearer Token
- å“åº”æ ¼å¼: JSON

### ä¸»è¦æ¥å£æ¨¡å—
- è®¤è¯æ¨¡å—: `/auth/*`
- ç”¨æˆ·ç®¡ç†: `/users/*`
- è§’è‰²ç®¡ç†: `/roles/*`
- æƒé™ç®¡ç†: `/permissions/*`
- äº¤æ˜“ç®¡ç†: `/transactions/*`
- ç³»ç»Ÿç®¡ç†: `/system/*`

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹çº¦æŸ
- éµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç è§„èŒƒæ£€æŸ¥
- ä½¿ç”¨ Stylelint è¿›è¡Œæ ·å¼è§„èŒƒæ£€æŸ¥

### å‘½åè§„èŒƒ
- ç»„ä»¶åä½¿ç”¨ PascalCase
- æ–‡ä»¶åä½¿ç”¨ kebab-case æˆ– camelCase
- å˜é‡å’Œå‡½æ•°ä½¿ç”¨ camelCase
- å¸¸é‡ä½¿ç”¨ UPPER_SNAKE_CASE

### Gitæäº¤è§„èŒƒ
```bash
feat: æ–°å¢åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

## éƒ¨ç½²è¯´æ˜

### å‰ç«¯éƒ¨ç½²
1. æ‰§è¡Œæ„å»ºå‘½ä»¤ç”Ÿæˆ `dist` ç›®å½•
2. å°† `dist` ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ¨ç½²åˆ° Web æœåŠ¡å™¨
3. é…ç½® Nginx æˆ– Apache æ”¯æŒ SPA è·¯ç”±

### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api/ {
        proxy_pass http://backend-server:8000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## åç«¯å¯¹æ¥

### FastAPIåç«¯é¡¹ç›®
ç³»ç»Ÿéœ€è¦é…åˆ FastAPI åç«¯æœåŠ¡ä½¿ç”¨ï¼Œåç«¯é¡¹ç›®åº”è¯¥åŒ…å«ï¼š

1. **ç”¨æˆ·è®¤è¯æ¨¡å—** - JWT token ç”Ÿæˆå’ŒéªŒè¯
2. **æƒé™ç®¡ç†æ¨¡å—** - ç”¨æˆ·ã€è§’è‰²ã€æƒé™çš„ CRUD æ“ä½œ
3. **äº¤æ˜“ç®¡ç†æ¨¡å—** - äº¤æ˜“æ•°æ®çš„ç®¡ç†å’Œç»Ÿè®¡
4. **æ•°æ®åº“è®¾è®¡** - ç”¨æˆ·è¡¨ã€è§’è‰²è¡¨ã€æƒé™è¡¨ã€äº¤æ˜“è¡¨ç­‰

### æ•°æ®åº“è¡¨ç»“æ„å»ºè®®
- `users` - ç”¨æˆ·è¡¨
- `roles` - è§’è‰²è¡¨
- `permissions` - æƒé™è¡¨
- `role_permissions` - è§’è‰²æƒé™å…³è”è¡¨
- `user_roles` - ç”¨æˆ·è§’è‰²å…³è”è¡¨ï¼ˆå¯é€‰ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªè§’è‰²å¯ç›´æ¥åœ¨ç”¨æˆ·è¡¨å­˜å‚¨ï¼‰
- `transactions` - äº¤æ˜“è¡¨
- `menus` - èœå•è¡¨

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ—¶è¯·ç¡®ä¿ï¼š
1. æ›´æ”¹é»˜è®¤çš„æµ‹è¯•è´¦å·å¯†ç 
2. é…ç½®æ­£ç¡®çš„åç«¯APIåœ°å€
3. æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. è¿›è¡Œå……åˆ†çš„å®‰å…¨æµ‹è¯• 